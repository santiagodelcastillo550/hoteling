<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Mis Reservas</title>
    <link rel="stylesheet" th:href="@{/css/styles.css?v=2}">
</head>
<body class="reservas-page">
    <!-- NAVBAR -->
    <nav>
        <div class="navbar-left">
            <h2><a th:href="@{/}" style="color:white; text-decoration:none;">Hoteling</a></h2>
        </div>
    </nav>

    <h1>Mis Reservas</h1>

    <div class="reservas-container">
        <!-- Si no hay reservas -->
        <div th:if="${#lists.isEmpty(reservas)}" class="no-reservas">
            <p>No tienes reservas registradas.</p>
        </div>

        <!-- Lista de reservas -->
        <div th:each="reserva : ${reservas}" class="reserva-card">
            <!-- Imagen del recurso -->
            <div class="reserva-img-container">
                <img th:src="@{/images/{foto}(foto=${reserva.recurso.foto})}"
				     th:alt="${reserva.recurso.nombre}" class="detalle-img"
				     onerror="this.src='/images/default.jpg'">
            </div>

            <!-- Contenido de la reserva -->
            <div class="reserva-content">
                <h2 th:text="${reserva.recurso.nombre}">Nombre del recurso</h2>
                <p th:text="${reserva.recurso.descripcion}">Descripción del recurso...</p>
                <p><strong>Fecha de entrada:</strong> <span th:text="${reserva.fechaInicio}"></span></p>
                <p><strong>Fecha de salida:</strong> <span th:text="${reserva.fechaFin}"></span></p>
                <p><strong>Personas:</strong> <span th:text="${reserva.personas}"></span></p>
                <p><strong>Estado:</strong> <span th:text="${reserva.estado}" th:classappend="' estado ' + ${reserva.estado}"></span></p>

                <!-- Mostrar observaciones si existen -->
                <p th:if="${reserva.observaciones != null && reserva.observaciones != ''}">
                    <strong>Observaciones:</strong> 
                    <span th:text="${reserva.observaciones}"></span>
                </p>

                <!-- Botones -->
                <div class="reserva-actions">
                    <form th:action="@{/}" method="get" style="display:inline;">
                        <button type="submit" class="btn volver-btn">← Volver</button>
                    </form>

                    <form th:action="@{'/cancelar-reserva/' + ${reserva.id}}" method="post" style="display:inline;">
                        <button type="submit" class="btn cancelar-btn">Cancelar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
